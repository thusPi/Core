var requestingLogs=!1;function toggleLogCategory(t){setTimeout((function(){let t=getInactiveLogCategories();return $(".log-items").attr("data-hide-categories",t.join(",")),saveState("log_categories_inactive",t.join(","))}),1)}function getInactiveLogCategories(){let t=[];return $(".log-items-category-filter .btn:not(.active)").each((function(){t.push($(this).attr("data-category"))})),t}function requestMoreLogs(t=25){let e=$(".log-item").last(),o=parseInt(e.attr("data-index"))-1;o>=0&&requestLogs(o-t,o)}async function refreshLogs(t=25){let e=$(".log-item:not(#log-item-template)").slice(0,t),o=parseInt($(".log-item:not(#log-item-template)").first().attr("data-at"));if(o>0){return await requestLogs(void 0,void 0,t,!0,o,"prepend")&&(throwSuccess("Succesfully refreshed top logs."),e.remove()),!1}}function refreshLogsLoop(){"admin/log/main"==thusPi.page.current()&&(refreshLogs(),setTimeout((function(){refreshLogsLoop()}),1500))}function requestLogs(t=null,e=null,o=null,i=!0,n=0,a="append"){requestingLogs=!0,thusPi.api.call("logs-get",{latest:o,min:t,max:e}).then((function(t){})).catch((function(){}))}function printLogMessage(t="",e="",o="info",i=0,n="",a=0,r="append",l=!1){let g=e.replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll(",",",<wbr />");return $log_item=$(".log-item#log-item-template").clone(),$log_item.removeAttr("id"),$log_item.find(".log-item-time").text(n),$log_item.find(".log-item-title").text(t+": "),$log_item.find(".log-item-content").html(g),$log_item.attr("data-category",o).attr("data-at",i).attr("data-index",a),$log_item.attr("data-page-search",`${n} ${t}: ${e}`),"append"==r?$log_item.appendTo(".log-items"):"prepend"==r&&$log_item.prependTo(".log-items"),l&&($log_item.addClass("log-item-new"),setTimeout((function(){$log_item.removeClass("log-item-new")}),300)),!1}function sortLogMessages(t,e){return t.index.toString().localeCompare(e.index.toString())}function sortLogMessagesInverted(t,e){return e.index.toString().localeCompare(t.index.toString())}document.addEventListener("scroll",(function(t){if("admin/log/main"==thusPi.page.current()){let e=t.target;if(e.classList.contains("log-items")){let t=e.scrollHeight,o=e.scrollTop;e.clientHeight;o>=.5*t&&!1===requestingLogs&&requestMoreLogs(),o>=t&&(e.scrollTop=o)}}}),!0),$(document).on("thuspi.ready",(function(){if("admin/log/main"==thusPi.page.current()){let t=getInactiveLogCategories();$(".log-items").attr("data-hide-categories",t.join(","))}}));