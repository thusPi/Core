thusPiAssign("page",{load(t,a=!1){t=trim(trim(trim(t,"/"),"#"),"/"),window.location.hash=`/${t}`,a&&window.location.reload(!0)},get(t,a=!1){let i=thusPi.page.current(),n=parseFloat($("main").attr("data-animation-duration")||0),e=thusPi.users.currentUser.getSetting("reduced_motion")||!1;t=trim(trim(trim(t,"/"),"#"),"/"),e||thusPi.page.animateOut(),setTimeout((function(){thusPi.page.current()==i&&"error"!=thusPi.page.getStatus()&&thusPi.page.setStatus("animating_loading")}),n),thusPi.api.call("page",{url:t}).then((function(i){let e=i.data.manifest.animation_duration||0;$("body").attr("data-page",i.data.manifest.name.trim("/")),$("main").attr("data-animation-duration",e),setTimeout((function(){if(a)return window.location.hash=`#/${t}`,window.location.reload(!0),!0;$("main").html(i.data.html),$(".sidenav-link").removeClass("active"),$(`.sidenav-link[data-target^="${i.data.manifest.name.split("/")[0]}"]`).addClass("active"),$(document).trigger("thusPi.load"),thusPi.page.setStatus("animating_in"),thusPi.page.animateIn(e)}),Math.max(n-i.took,0))})).catch((function(t){$("main").html(""),thusPi.page.setStatus("error")}))},animateOut(){thusPi.page.setStatus("animating_out"),$(".popup-shield").removeClass("show")},animateIn(t){thusPi.page.animationSetup(t),thusPi.page.setStatus("animating_in"),setTimeout((function(){$(document).trigger("thusPi.ready"),thusPi.page.setStatus("ready")}),t)},animationSetup(t){let a={fade:[],slide:[]};a={fade:{default:$(".transition-fade"),order:$(".transition-fade-order"),random:$(".transition-fade-random")},slide:$(".transition-slide-top, .transition-slide-right, .transition-slide-bottom, .transition-slide-left")},a.fade.default.each((function(a,i){$(i).css("transition",`${t}ms opacity`)})),a.fade.order.each((function(a,i){let n=Math.max($(i).siblings(".transition-fade-order").length,1),e=Math.round(a/n*t);$(i).css("transition",`${t}ms opacity ${e}ms`)})),a.fade.random.each((function(a,i){let n=Math.floor(Math.random()*(t/2+1));$(i).css("transition",`${t-n}ms opacity ${n}ms`)})),a.slide.each((function(a,i){$(i).css("transition",`${t}ms transform, ${t}ms opacity ease-in-out`)}))},current(t=!1){const a=$("body").attr("data-page"),i=window.location.hash.split("?")[1]||"";return t?a+"?"+i:a},getStatus:()=>$("body").attr("data-status"),setStatus:t=>($("body").attr("data-status",t),thusPi.page),reload:()=>(thusPi.page.get(thusPi.page.current(!0)),thusPi.page)}),$(window).on("load",(function(){let t=window.location.hash.substring(1);""==t?thusPi.page.get("home/main"):thusPi.page.get(t)})),$(window).on("hashchange",(function(){let t=window.location.hash.substring(1);thusPi.page.get(t)}));