HomioPi_assign("page",{load:(t,a=!1)=>{t=trim(trim(trim(t,"/"),"#"),"/"),window.location.hash=`/${t}`,a&&window.location.reload(!0)},get:(t,a=!1)=>{let e=HomioPi.page.current(),i=parseFloat($("main").attr("data-animation-duration")||0),o=HomioPi.users.currentUser.getSetting("reduced_motion")||!1;t=trim(trim(trim(t,"/"),"#"),"/"),o||HomioPi.page.animateOut(),setTimeout((()=>{HomioPi.page.current()==e&&"error"!=HomioPi.page.getStatus()&&HomioPi.page.setStatus("animating_loading")}),i),HomioPi.api.call("page",{url:t}).then((e=>{let o=e.data.manifest.animation_duration||0;$("body").attr("data-page",e.data.manifest.name.trim("/")),$("main").attr("data-animation-duration",o),setTimeout((()=>{if(a)return window.location.hash=`#/${t}`,window.location.reload(!0),!0;$("main").html(e.data.html),$(".sidenav-link").removeClass("active"),$(`.sidenav-link[data-target="${e.data.manifest.name.split("/")[0]}"]`).addClass("active"),$(document).trigger("HomioPi.load"),HomioPi.page.setStatus("animating_in"),HomioPi.page.animateIn(o)}),Math.max(i-e.took,0))})).catch((t=>{$("main").html(""),HomioPi.page.setStatus("error")}))},animateOut:()=>{HomioPi.page.setStatus("animating_out"),$(".popup-shield").removeClass("show")},animateIn:t=>{HomioPi.page.animationSetup(t),HomioPi.page.setStatus("animating_in"),setTimeout((()=>{$(document).trigger("HomioPi.ready"),HomioPi.page.setStatus("ready")}),t)},animationSetup:t=>{let a={fade:[],slide:[]};a={fade:{default:$(".transition-fade"),order:$(".transition-fade-order"),random:$(".transition-fade-random")},slide:$(".transition-slide-top, .transition-slide-right, .transition-slide-bottom, .transition-slide-left")},a.fade.default.each((function(a,e){$(e).css("transition",`${t}ms opacity`)})),a.fade.order.each((function(a,e){let i=Math.max($(e).siblings(".transition-fade-order").length,1),o=Math.round(a/i*t);$(e).css("transition",`${t}ms opacity ${o}ms`)})),a.fade.random.each((function(a,e){let i=Math.floor(Math.random()*(t/2+1));$(e).css("transition",`${t-i}ms opacity ${i}ms`)})),a.slide.each((function(a,e){$(e).css("transition",`${t}ms transform, ${t}ms opacity ease-in-out`)}))},current:(t=!1)=>{const a=$("body").attr("data-page"),e=window.location.hash.split("?")[1]||"";return t?a+"?"+e:a},getStatus:()=>$("body").attr("data-status"),setStatus:t=>($("body").attr("data-status",t),HomioPi.page),reload:()=>(HomioPi.page.get(HomioPi.page.current(!0)),HomioPi.page)}),$(window).on("load",(function(){let t=window.location.hash.substring(1);""==t?HomioPi.page.get("home/main"):HomioPi.page.get(t)})),$(window).on("hashchange",(function(){let t=window.location.hash.substring(1);HomioPi.page.get(t)}));