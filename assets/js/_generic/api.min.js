thusPiAssign("api",{call(e,o,n=!1){e=`${thusPi.data.webroot}/api/${e}/`;let t={},r=localStorage.getItem("thusPi_tokenId");return null!==r&&(t["x-token-id"]=r),new Promise((function(r,s){let a;$.ajax({method:"POST",data:o,url:e,headers:t,async:!0,beforeSend:function(){a=Date.now()},success:function(e){return void 0===e.success||!0!==e.success?(s(e),!1):(e.took=Date.now()-a,r(e),!0)},error:function(e){return e.responseJSON&&("error_authorization"==e.responseJSON?.info&&thusPi.page.load("login/main?redirect=home/main",!0),s(e.responseJSON)),n&&s(e),!1}})}))}});