thusPiAssign("api",{call(e,o){e=`${thusPi.data.webroot}/api/${e}/`;let n={},t=localStorage.getItem("thusPi_tokenId");return null!==t&&(n["x-token-id"]=t),new Promise((function(t,r){let s;$.ajax({method:"POST",data:o,url:e,headers:n,async:!0,beforeSend:function(){s=Date.now()},success:function(e){return void 0===e.success||!0!==e.success?(r(e),!1):(e.took=Date.now()-s,t(e),!0)},error:function(e){return e.responseJSON&&("error_authorization"==e.responseJSON?.info&&thusPi.page.load("login/main?redirect=home/main",!0),r(e.responseJSON)),!1}})}))}});