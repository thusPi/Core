thusPiAssign("api",{call(e,t){e=`${thusPi.data.webroot}/api/${e}/`;let o={},n=localStorage.getItem("thusPi_tokenId"),r=localStorage.getItem("thusPi_token");return null!==r&&null!==n&&(o["x-token-id"]=n,o["x-token"]=r),new Promise((function(n,r){let s;$.ajax({method:"POST",data:t,url:e,headers:o,async:!0,beforeSend:function(){s=Date.now()},success:function(e){return void 0===e.success||!0!==e.success?(r(e),!1):(e.took=Date.now()-s,n(e),!0)},error:function(e){return e.responseJSON?("error_authorization"==e.responseJSON?.info&&thusPi.page.load("login/main?redirect=home/main",!0),r(e.responseJSON)):r(e),!1}})}))}});