!function(l,e){if("function"==typeof define&&define.amd)define(["./blockly_compressed.js"],e);else if("object"==typeof exports)module.exports=e(require("./blockly_compressed.js"));else{var o=e(l.Blockly);l.Blockly.PHP=o}}(this,(function(l){var e=l.__namespace__,o=new e.module$exports$Blockly$Generator.Generator("PHP");return o.addReservedWords("__halt_compiler,abstract,and,array,as,break,callable,case,catch,class,clone,const,continue,declare,default,die,do,echo,else,elseif,empty,enddeclare,endfor,endforeach,endif,endswitch,endwhile,eval,exit,extends,final,for,foreach,function,global,goto,if,implements,include,include_once,instanceof,insteadof,interface,isset,list,namespace,new,or,print,private,protected,public,require,require_once,return,static,switch,throw,trait,try,unset,use,var,while,xor,PHP_VERSION,PHP_MAJOR_VERSION,PHP_MINOR_VERSION,PHP_RELEASE_VERSION,PHP_VERSION_ID,PHP_EXTRA_VERSION,PHP_ZTS,PHP_DEBUG,PHP_MAXPATHLEN,PHP_OS,PHP_SAPI,PHP_EOL,PHP_INT_MAX,PHP_INT_SIZE,DEFAULT_INCLUDE_PATH,PEAR_INSTALL_DIR,PEAR_EXTENSION_DIR,PHP_EXTENSION_DIR,PHP_PREFIX,PHP_BINDIR,PHP_BINARY,PHP_MANDIR,PHP_LIBDIR,PHP_DATADIR,PHP_SYSCONFDIR,PHP_LOCALSTATEDIR,PHP_CONFIG_FILE_PATH,PHP_CONFIG_FILE_SCAN_DIR,PHP_SHLIB_SUFFIX,E_ERROR,E_WARNING,E_PARSE,E_NOTICE,E_CORE_ERROR,E_CORE_WARNING,E_COMPILE_ERROR,E_COMPILE_WARNING,E_USER_ERROR,E_USER_WARNING,E_USER_NOTICE,E_DEPRECATED,E_USER_DEPRECATED,E_ALL,E_STRICT,__COMPILER_HALT_OFFSET__,TRUE,FALSE,NULL,__CLASS__,__DIR__,__FILE__,__FUNCTION__,__LINE__,__METHOD__,__NAMESPACE__,__TRAIT__"),o.ORDER_ATOMIC=0,o.ORDER_CLONE=1,o.ORDER_NEW=1,o.ORDER_MEMBER=2.1,o.ORDER_FUNCTION_CALL=2.2,o.ORDER_POWER=3,o.ORDER_INCREMENT=4,o.ORDER_DECREMENT=4,o.ORDER_BITWISE_NOT=4,o.ORDER_CAST=4,o.ORDER_SUPPRESS_ERROR=4,o.ORDER_INSTANCEOF=5,o.ORDER_LOGICAL_NOT=6,o.ORDER_UNARY_PLUS=7.1,o.ORDER_UNARY_NEGATION=7.2,o.ORDER_MULTIPLICATION=8.1,o.ORDER_DIVISION=8.2,o.ORDER_MODULUS=8.3,o.ORDER_ADDITION=9.1,o.ORDER_SUBTRACTION=9.2,o.ORDER_STRING_CONCAT=9.3,o.ORDER_BITWISE_SHIFT=10,o.ORDER_RELATIONAL=11,o.ORDER_EQUALITY=12,o.ORDER_REFERENCE=13,o.ORDER_BITWISE_AND=13,o.ORDER_BITWISE_XOR=14,o.ORDER_BITWISE_OR=15,o.ORDER_LOGICAL_AND=16,o.ORDER_LOGICAL_OR=17,o.ORDER_IF_NULL=18,o.ORDER_CONDITIONAL=19,o.ORDER_ASSIGNMENT=20,o.ORDER_LOGICAL_AND_WEAK=21,o.ORDER_LOGICAL_XOR=22,o.ORDER_LOGICAL_OR_WEAK=23,o.ORDER_NONE=99,o.ORDER_OVERRIDES=[[o.ORDER_MEMBER,o.ORDER_FUNCTION_CALL],[o.ORDER_MEMBER,o.ORDER_MEMBER],[o.ORDER_LOGICAL_NOT,o.ORDER_LOGICAL_NOT],[o.ORDER_MULTIPLICATION,o.ORDER_MULTIPLICATION],[o.ORDER_ADDITION,o.ORDER_ADDITION],[o.ORDER_LOGICAL_AND,o.ORDER_LOGICAL_AND],[o.ORDER_LOGICAL_OR,o.ORDER_LOGICAL_OR]],o.isInitialized=!1,o.init=function(l){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new e.module$exports$Blockly$Names.Names(this.RESERVED_WORDS_,"$"),this.nameDB_.setVariableMap(l.getVariableMap()),this.nameDB_.populateVariables(l),this.nameDB_.populateProcedures(l),this.isInitialized=!0},o.finish=function(l){var o=(0,e.module$exports$Blockly$utils$object.values)(this.definitions_);return l=Object.getPrototypeOf(this).finish.call(this,l),this.isInitialized=!1,this.nameDB_.reset(),o.join("\n\n")+"\n\n\n"+l},o.scrubNakedValue=function(l){return l+";\n"},o.quote_=function(l){return"'"+(l=l.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},o.multiline_quote_=function(l){return l.split(/\n/g).map(this.quote_).join(' . "\\n" .\n')},o.scrub_=function(l,o,P){var n="";if(!l.outputConnection||!l.outputConnection.targetConnection){var t=l.getCommentText();t&&(t=(0,e.module$exports$Blockly$utils$string.wrap)(t,this.COMMENT_WRAP-3),n+=this.prefixLines(t,"// ")+"\n");for(var r=0;r<l.inputList.length;r++)l.inputList[r].type===e.module$exports$Blockly$inputTypes.inputTypes.VALUE&&(t=l.inputList[r].connection.targetBlock())&&(t=this.allNestedComments(t))&&(n+=this.prefixLines(t,"// "))}return l=l.nextConnection&&l.nextConnection.targetBlock(),n+o+(P=P?"":this.blockToCode(l))},o.getAdjusted=function(l,o,P,n,t){P=P||0,t=t||this.ORDER_NONE,l.workspace.options.oneBasedIndex&&P--;var r=l.workspace.options.oneBasedIndex?"1":"0",c=t;if(0<P)var _=c=this.ORDER_ADDITION;else 0>P?_=c=this.ORDER_SUBTRACTION:n&&(_=c=this.ORDER_UNARY_NEGATION);return l=this.valueToCode(l,o,c)||r,(0,e.module$exports$Blockly$utils$string.isNumber)(l)?(l=Number(l)+P,n&&(l=-l)):(0<P?l=l+" + "+P:0>P&&(l=l+" - "+-P),n&&(l=P?"-("+l+")":"-"+l),_=Math.floor(_),t=Math.floor(t),_&&t>=_&&(l="("+l+")")),l},e.Blockly.PHP=o,e.Blockly.PHP.variables_get=function(l){return[e.Blockly.PHP.nameDB_.getName(l.getFieldValue("VAR"),e.module$exports$Blockly$Names.NameType.VARIABLE),e.Blockly.PHP.ORDER_ATOMIC]},e.Blockly.PHP.variables_set=function(l){var o=e.Blockly.PHP.valueToCode(l,"VALUE",e.Blockly.PHP.ORDER_ASSIGNMENT)||"0";return e.Blockly.PHP.nameDB_.getName(l.getFieldValue("VAR"),e.module$exports$Blockly$Names.NameType.VARIABLE)+" = "+o+";\n"},e.Blockly.PHP.variables_get_dynamic=e.Blockly.PHP.variables_get,e.Blockly.PHP.variables_set_dynamic=e.Blockly.PHP.variables_set,e.Blockly.PHP.text=function(l){return[e.Blockly.PHP.quote_(l.getFieldValue("TEXT")),e.Blockly.PHP.ORDER_ATOMIC]},e.Blockly.PHP.text_multiline=function(l){var o=-1!==(l=e.Blockly.PHP.multiline_quote_(l.getFieldValue("TEXT"))).indexOf(".")?e.Blockly.PHP.ORDER_STRING_CONCAT:e.Blockly.PHP.ORDER_ATOMIC;return[l,o]},e.Blockly.PHP.text_join=function(l){if(0===l.itemCount_)return["''",e.Blockly.PHP.ORDER_ATOMIC];if(1===l.itemCount_)return[e.Blockly.PHP.valueToCode(l,"ADD0",e.Blockly.PHP.ORDER_NONE)||"''",e.Blockly.PHP.ORDER_NONE];if(2===l.itemCount_){var o=e.Blockly.PHP.valueToCode(l,"ADD0",e.Blockly.PHP.ORDER_STRING_CONCAT)||"''";return[o+" . "+(l=e.Blockly.PHP.valueToCode(l,"ADD1",e.Blockly.PHP.ORDER_STRING_CONCAT)||"''"),e.Blockly.PHP.ORDER_STRING_CONCAT]}o=Array(l.itemCount_);for(var P=0;P<l.itemCount_;P++)o[P]=e.Blockly.PHP.valueToCode(l,"ADD"+P,e.Blockly.PHP.ORDER_NONE)||"''";return["implode('', array("+o.join(",")+"))",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.text_append=function(l){return e.Blockly.PHP.nameDB_.getName(l.getFieldValue("VAR"),e.module$exports$Blockly$Names.NameType.VARIABLE)+" .= "+(l=e.Blockly.PHP.valueToCode(l,"TEXT",e.Blockly.PHP.ORDER_ASSIGNMENT)||"''")+";\n"},e.Blockly.PHP.text_length=function(l){return[e.Blockly.PHP.provideFunction_("length","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($value) {\n  if (is_string($value)) {\n    return strlen($value);\n  }\n  return count($value);\n}\n")+"("+(l=e.Blockly.PHP.valueToCode(l,"VALUE",e.Blockly.PHP.ORDER_NONE)||"''")+")",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.text_isEmpty=function(l){return["empty("+(e.Blockly.PHP.valueToCode(l,"VALUE",e.Blockly.PHP.ORDER_NONE)||"''")+")",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.text_indexOf=function(l){var o="FIRST"===l.getFieldValue("END")?"strpos":"strrpos",P=e.Blockly.PHP.valueToCode(l,"FIND",e.Blockly.PHP.ORDER_NONE)||"''",n=e.Blockly.PHP.valueToCode(l,"VALUE",e.Blockly.PHP.ORDER_NONE)||"''",t=" -1",r="";return l.workspace.options.oneBasedIndex&&(t=" 0",r=" + 1"),[e.Blockly.PHP.provideFunction_("FIRST"===l.getFieldValue("END")?"text_indexOf":"text_lastIndexOf","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($text, $search) {\n  $pos = "+o+"($text, $search);\n  return $pos === false ? "+t+" : $pos"+r+";\n}\n")+"("+n+", "+P+")",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.text_charAt=function(l){var o=l.getFieldValue("WHERE")||"FROM_START",P=e.Blockly.PHP.valueToCode(l,"VALUE",e.Blockly.PHP.ORDER_NONE)||"''";switch(o){case"FIRST":return["substr("+P+", 0, 1)",e.Blockly.PHP.ORDER_FUNCTION_CALL];case"LAST":return["substr("+P+", -1)",e.Blockly.PHP.ORDER_FUNCTION_CALL];case"FROM_START":return["substr("+P+", "+(l=e.Blockly.PHP.getAdjusted(l,"AT"))+", 1)",e.Blockly.PHP.ORDER_FUNCTION_CALL];case"FROM_END":return["substr("+P+", "+(l=e.Blockly.PHP.getAdjusted(l,"AT",1,!0))+", 1)",e.Blockly.PHP.ORDER_FUNCTION_CALL];case"RANDOM":return[e.Blockly.PHP.provideFunction_("text_random_letter","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($text) {\n  return $text[rand(0, strlen($text) - 1)];\n}\n")+"("+P+")",e.Blockly.PHP.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},e.Blockly.PHP.text_getSubstring=function(l){var o=l.getFieldValue("WHERE1"),P=l.getFieldValue("WHERE2"),n=e.Blockly.PHP.valueToCode(l,"STRING",e.Blockly.PHP.ORDER_NONE)||"''";if("FIRST"===o&&"LAST"===P)return[n,e.Blockly.PHP.ORDER_NONE];var t=e.Blockly.PHP.getAdjusted(l,"AT1");return l=e.Blockly.PHP.getAdjusted(l,"AT2"),[e.Blockly.PHP.provideFunction_("text_get_substring","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($text, $where1, $at1, $where2, $at2) {\n  if ($where1 == 'FROM_END') {\n    $at1 = strlen($text) - 1 - $at1;\n  } else if ($where1 == 'FIRST') {\n    $at1 = 0;\n  } else if ($where1 != 'FROM_START') {\n    throw new Exception('Unhandled option (text_get_substring).');\n  }\n  $length = 0;\n  if ($where2 == 'FROM_START') {\n    $length = $at2 - $at1 + 1;\n  } else if ($where2 == 'FROM_END') {\n    $length = strlen($text) - $at1 - $at2;\n  } else if ($where2 == 'LAST') {\n    $length = strlen($text) - $at1;\n  } else {\n    throw new Exception('Unhandled option (text_get_substring).');\n  }\n  return substr($text, $at1, $length);\n}\n")+"("+n+", '"+o+"', "+t+", '"+P+"', "+l+")",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.text_changeCase=function(l){var o,P=e.Blockly.PHP.valueToCode(l,"TEXT",e.Blockly.PHP.ORDER_NONE)||"''";return"UPPERCASE"===l.getFieldValue("CASE")?o="strtoupper("+P+")":"LOWERCASE"===l.getFieldValue("CASE")?o="strtolower("+P+")":"TITLECASE"===l.getFieldValue("CASE")&&(o="ucwords(strtolower("+P+"))"),[o,e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.text_trim=function(l){return[{LEFT:"ltrim",RIGHT:"rtrim",BOTH:"trim"}[l.getFieldValue("MODE")]+"("+(l=e.Blockly.PHP.valueToCode(l,"TEXT",e.Blockly.PHP.ORDER_NONE)||"''")+")",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.text_print=function(l){return"print("+(e.Blockly.PHP.valueToCode(l,"TEXT",e.Blockly.PHP.ORDER_NONE)||"''")+");\n"},e.Blockly.PHP.text_prompt_ext=function(l){var o="readline("+(l.getField("TEXT")?e.Blockly.PHP.quote_(l.getFieldValue("TEXT")):e.Blockly.PHP.valueToCode(l,"TEXT",e.Blockly.PHP.ORDER_NONE)||"''")+")";return"NUMBER"===l.getFieldValue("TYPE")&&(o="floatval("+o+")"),[o,e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.text_prompt=e.Blockly.PHP.text_prompt_ext,e.Blockly.PHP.text_count=function(l){var o=e.Blockly.PHP.valueToCode(l,"TEXT",e.Blockly.PHP.ORDER_NONE)||"''";return["strlen("+(l=e.Blockly.PHP.valueToCode(l,"SUB",e.Blockly.PHP.ORDER_NONE)||"''")+") === 0 ? strlen("+o+") + 1 : substr_count("+o+", "+l+")",e.Blockly.PHP.ORDER_CONDITIONAL]},e.Blockly.PHP.text_replace=function(l){var o=e.Blockly.PHP.valueToCode(l,"TEXT",e.Blockly.PHP.ORDER_NONE)||"''";return["str_replace("+(e.Blockly.PHP.valueToCode(l,"FROM",e.Blockly.PHP.ORDER_NONE)||"''")+", "+(l=e.Blockly.PHP.valueToCode(l,"TO",e.Blockly.PHP.ORDER_NONE)||"''")+", "+o+")",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.text_reverse=function(l){return["strrev("+(e.Blockly.PHP.valueToCode(l,"TEXT",e.Blockly.PHP.ORDER_NONE)||"''")+")",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.procedures_defreturn=function(l){for(var o,P=[],n=l.workspace,t=(0,e.module$exports$Blockly$Variables.allUsedVarModels)(n)||[],r=0;o=t[r];r++)o=o.name,-1===l.getVars().indexOf(o)&&P.push(e.Blockly.PHP.nameDB_.getName(o,e.module$exports$Blockly$Names.NameType.VARIABLE));for(n=(0,e.module$exports$Blockly$Variables.allDeveloperVariables)(n),t=0;t<n.length;t++)P.push(e.Blockly.PHP.nameDB_.getName(n[t],e.module$exports$Blockly$Names.NameType.DEVELOPER_VARIABLE));n=P.length?e.Blockly.PHP.INDENT+"global "+P.join(", ")+";\n":"",P=e.Blockly.PHP.nameDB_.getName(l.getFieldValue("NAME"),e.module$exports$Blockly$Names.NameType.PROCEDURE),t="",e.Blockly.PHP.STATEMENT_PREFIX&&(t+=e.Blockly.PHP.injectId(e.Blockly.PHP.STATEMENT_PREFIX,l)),e.Blockly.PHP.STATEMENT_SUFFIX&&(t+=e.Blockly.PHP.injectId(e.Blockly.PHP.STATEMENT_SUFFIX,l)),t&&(t=e.Blockly.PHP.prefixLines(t,e.Blockly.PHP.INDENT)),r="",e.Blockly.PHP.INFINITE_LOOP_TRAP&&(r=e.Blockly.PHP.prefixLines(e.Blockly.PHP.injectId(e.Blockly.PHP.INFINITE_LOOP_TRAP,l),e.Blockly.PHP.INDENT)),o=e.Blockly.PHP.statementToCode(l,"STACK");var c=e.Blockly.PHP.valueToCode(l,"RETURN",e.Blockly.PHP.ORDER_NONE)||"",_="";o&&c&&(_=t),c&&(c=e.Blockly.PHP.INDENT+"return "+c+";\n");for(var a=[],E=l.getVars(),R=0;R<E.length;R++)a[R]=e.Blockly.PHP.nameDB_.getName(E[R],e.module$exports$Blockly$Names.NameType.VARIABLE);return n="function "+P+"("+a.join(", ")+") {\n"+n+t+r+o+_+c+"}",n=e.Blockly.PHP.scrub_(l,n),e.Blockly.PHP.definitions_["%"+P]=n,null},e.Blockly.PHP.procedures_defnoreturn=e.Blockly.PHP.procedures_defreturn,e.Blockly.PHP.procedures_callreturn=function(l){for(var o=e.Blockly.PHP.nameDB_.getName(l.getFieldValue("NAME"),e.module$exports$Blockly$Names.NameType.PROCEDURE),P=[],n=l.getVars(),t=0;t<n.length;t++)P[t]=e.Blockly.PHP.valueToCode(l,"ARG"+t,e.Blockly.PHP.ORDER_NONE)||"null";return[o+"("+P.join(", ")+")",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.procedures_callnoreturn=function(l){return e.Blockly.PHP.procedures_callreturn(l)[0]+";\n"},e.Blockly.PHP.procedures_ifreturn=function(l){var o="if ("+(e.Blockly.PHP.valueToCode(l,"CONDITION",e.Blockly.PHP.ORDER_NONE)||"false")+") {\n";return e.Blockly.PHP.STATEMENT_SUFFIX&&(o+=e.Blockly.PHP.prefixLines(e.Blockly.PHP.injectId(e.Blockly.PHP.STATEMENT_SUFFIX,l),e.Blockly.PHP.INDENT)),l.hasReturnValue_?(l=e.Blockly.PHP.valueToCode(l,"VALUE",e.Blockly.PHP.ORDER_NONE)||"null",o+=e.Blockly.PHP.INDENT+"return "+l+";\n"):o+=e.Blockly.PHP.INDENT+"return;\n",o+"}\n"},e.Blockly.PHP.math_number=function(l){var o=0<=(l=Number(l.getFieldValue("NUM")))?e.Blockly.PHP.ORDER_ATOMIC:e.Blockly.PHP.ORDER_UNARY_NEGATION;return 1/0===l?l="INF":-1/0===l&&(l="-INF"),[l,o]},e.Blockly.PHP.math_arithmetic=function(l){var o={ADD:[" + ",e.Blockly.PHP.ORDER_ADDITION],MINUS:[" - ",e.Blockly.PHP.ORDER_SUBTRACTION],MULTIPLY:[" * ",e.Blockly.PHP.ORDER_MULTIPLICATION],DIVIDE:[" / ",e.Blockly.PHP.ORDER_DIVISION],POWER:[" ** ",e.Blockly.PHP.ORDER_POWER]}[l.getFieldValue("OP")],P=o[0];return o=o[1],[(e.Blockly.PHP.valueToCode(l,"A",o)||"0")+P+(l=e.Blockly.PHP.valueToCode(l,"B",o)||"0"),o]},e.Blockly.PHP.math_single=function(l){var o=l.getFieldValue("OP");if("NEG"===o)return"-"===(l=e.Blockly.PHP.valueToCode(l,"NUM",e.Blockly.PHP.ORDER_UNARY_NEGATION)||"0")[0]&&(l=" "+l),["-"+l,e.Blockly.PHP.ORDER_UNARY_NEGATION];switch(l="SIN"===o||"COS"===o||"TAN"===o?e.Blockly.PHP.valueToCode(l,"NUM",e.Blockly.PHP.ORDER_DIVISION)||"0":e.Blockly.PHP.valueToCode(l,"NUM",e.Blockly.PHP.ORDER_NONE)||"0",o){case"ABS":var P="abs("+l+")";break;case"ROOT":P="sqrt("+l+")";break;case"LN":P="log("+l+")";break;case"EXP":P="exp("+l+")";break;case"POW10":P="pow(10,"+l+")";break;case"ROUND":P="round("+l+")";break;case"ROUNDUP":P="ceil("+l+")";break;case"ROUNDDOWN":P="floor("+l+")";break;case"SIN":P="sin("+l+" / 180 * pi())";break;case"COS":P="cos("+l+" / 180 * pi())";break;case"TAN":P="tan("+l+" / 180 * pi())"}if(P)return[P,e.Blockly.PHP.ORDER_FUNCTION_CALL];switch(o){case"LOG10":P="log("+l+") / log(10)";break;case"ASIN":P="asin("+l+") / pi() * 180";break;case"ACOS":P="acos("+l+") / pi() * 180";break;case"ATAN":P="atan("+l+") / pi() * 180";break;default:throw Error("Unknown math operator: "+o)}return[P,e.Blockly.PHP.ORDER_DIVISION]},e.Blockly.PHP.math_constant=function(l){return{PI:["M_PI",e.Blockly.PHP.ORDER_ATOMIC],E:["M_E",e.Blockly.PHP.ORDER_ATOMIC],GOLDEN_RATIO:["(1 + sqrt(5)) / 2",e.Blockly.PHP.ORDER_DIVISION],SQRT2:["M_SQRT2",e.Blockly.PHP.ORDER_ATOMIC],SQRT1_2:["M_SQRT1_2",e.Blockly.PHP.ORDER_ATOMIC],INFINITY:["INF",e.Blockly.PHP.ORDER_ATOMIC]}[l.getFieldValue("CONSTANT")]},e.Blockly.PHP.math_number_property=function(l){var o={EVEN:[""," % 2 == 0",e.Blockly.PHP.ORDER_MODULUS,e.Blockly.PHP.ORDER_EQUALITY],ODD:[""," % 2 == 1",e.Blockly.PHP.ORDER_MODULUS,e.Blockly.PHP.ORDER_EQUALITY],WHOLE:["is_int(",")",e.Blockly.PHP.ORDER_NONE,e.Blockly.PHP.ORDER_FUNCTION_CALL],POSITIVE:[""," > 0",e.Blockly.PHP.ORDER_RELATIONAL,e.Blockly.PHP.ORDER_RELATIONAL],NEGATIVE:[""," < 0",e.Blockly.PHP.ORDER_RELATIONAL,e.Blockly.PHP.ORDER_RELATIONAL],DIVISIBLE_BY:[null,null,e.Blockly.PHP.ORDER_MODULUS,e.Blockly.PHP.ORDER_EQUALITY],PRIME:[null,null,e.Blockly.PHP.ORDER_NONE,e.Blockly.PHP.ORDER_FUNCTION_CALL]},P=l.getFieldValue("PROPERTY"),n=(o=e.$jscomp.makeIterator(o[P])).next().value,t=o.next().value,r=o.next().value;if(o=o.next().value,r=e.Blockly.PHP.valueToCode(l,"NUMBER_TO_CHECK",r)||"0","PRIME"===P)l=e.Blockly.PHP.provideFunction_("math_isPrime","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($n) {\n  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods\n  if ($n == 2 || $n == 3) {\n    return true;\n  }\n  // False if n is NaN, negative, is 1, or not whole.\n  // And false if n is divisible by 2 or 3.\n  if (!is_numeric($n) || $n <= 1 || $n % 1 != 0 || $n % 2 == 0 || $n % 3 == 0) {\n    return false;\n  }\n  // Check all the numbers of form 6k +/- 1, up to sqrt(n).\n  for ($x = 6; $x <= sqrt($n) + 1; $x += 6) {\n    if ($n % ($x - 1) == 0 || $n % ($x + 1) == 0) {\n      return false;\n    }\n  }\n  return true;\n}\n")+"("+r+")";else if("DIVISIBLE_BY"===P){if("0"===(l=e.Blockly.PHP.valueToCode(l,"DIVISOR",e.Blockly.PHP.ORDER_MODULUS)||"0"))return["false",e.Blockly.PHP.ORDER_ATOMIC];l=r+" % "+l+" == 0"}else l=n+r+t;return[l,o]},e.Blockly.PHP.math_change=function(l){var o=e.Blockly.PHP.valueToCode(l,"DELTA",e.Blockly.PHP.ORDER_ADDITION)||"0";return e.Blockly.PHP.nameDB_.getName(l.getFieldValue("VAR"),e.module$exports$Blockly$Names.NameType.VARIABLE)+" += "+o+";\n"},e.Blockly.PHP.math_round=e.Blockly.PHP.math_single,e.Blockly.PHP.math_trig=e.Blockly.PHP.math_single,e.Blockly.PHP.math_on_list=function(l){var o=l.getFieldValue("OP");switch(o){case"SUM":l="array_sum("+(l=e.Blockly.PHP.valueToCode(l,"LIST",e.Blockly.PHP.ORDER_FUNCTION_CALL)||"array()")+")";break;case"MIN":l="min("+(l=e.Blockly.PHP.valueToCode(l,"LIST",e.Blockly.PHP.ORDER_FUNCTION_CALL)||"array()")+")";break;case"MAX":l="max("+(l=e.Blockly.PHP.valueToCode(l,"LIST",e.Blockly.PHP.ORDER_FUNCTION_CALL)||"array()")+")";break;case"AVERAGE":l=(o=e.Blockly.PHP.provideFunction_("math_mean","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($myList) {\n  return array_sum($myList) / count($myList);\n}\n"))+"("+(l=e.Blockly.PHP.valueToCode(l,"LIST",e.Blockly.PHP.ORDER_NONE)||"array()")+")";break;case"MEDIAN":l=(o=e.Blockly.PHP.provideFunction_("math_median","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($arr) {\n  sort($arr,SORT_NUMERIC);\n  return (count($arr) % 2) ? $arr[floor(count($arr) / 2)] :\n      ($arr[floor(count($arr) / 2)] + $arr[floor(count($arr) / 2) - 1]) / 2;\n}\n"))+"("+(l=e.Blockly.PHP.valueToCode(l,"LIST",e.Blockly.PHP.ORDER_NONE)||"[]")+")";break;case"MODE":l=(o=e.Blockly.PHP.provideFunction_("math_modes","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($values) {\n  if (empty($values)) return array();\n  $counts = array_count_values($values);\n  arsort($counts); // Sort counts in descending order\n  $modes = array_keys($counts, current($counts), true);\n  return $modes;\n}\n"))+"("+(l=e.Blockly.PHP.valueToCode(l,"LIST",e.Blockly.PHP.ORDER_NONE)||"[]")+")";break;case"STD_DEV":l=(o=e.Blockly.PHP.provideFunction_("math_standard_deviation","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($numbers) {\n  $n = count($numbers);\n  if (!$n) return null;\n  $mean = array_sum($numbers) / count($numbers);\n  foreach($numbers as $key => $num) $devs[$key] = pow($num - $mean, 2);\n  return sqrt(array_sum($devs) / (count($devs) - 1));\n}\n"))+"("+(l=e.Blockly.PHP.valueToCode(l,"LIST",e.Blockly.PHP.ORDER_NONE)||"[]")+")";break;case"RANDOM":l=(o=e.Blockly.PHP.provideFunction_("math_random_list","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($list) {\n  $x = rand(0, count($list)-1);\n  return $list[$x];\n}\n"))+"("+(l=e.Blockly.PHP.valueToCode(l,"LIST",e.Blockly.PHP.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+o)}return[l,e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.math_modulo=function(l){return[(e.Blockly.PHP.valueToCode(l,"DIVIDEND",e.Blockly.PHP.ORDER_MODULUS)||"0")+" % "+(l=e.Blockly.PHP.valueToCode(l,"DIVISOR",e.Blockly.PHP.ORDER_MODULUS)||"0"),e.Blockly.PHP.ORDER_MODULUS]},e.Blockly.PHP.math_constrain=function(l){return["min(max("+(e.Blockly.PHP.valueToCode(l,"VALUE",e.Blockly.PHP.ORDER_NONE)||"0")+", "+(e.Blockly.PHP.valueToCode(l,"LOW",e.Blockly.PHP.ORDER_NONE)||"0")+"), "+(l=e.Blockly.PHP.valueToCode(l,"HIGH",e.Blockly.PHP.ORDER_NONE)||"Infinity")+")",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.math_random_int=function(l){var o=e.Blockly.PHP.valueToCode(l,"FROM",e.Blockly.PHP.ORDER_NONE)||"0";return l=e.Blockly.PHP.valueToCode(l,"TO",e.Blockly.PHP.ORDER_NONE)||"0",[e.Blockly.PHP.provideFunction_("math_random_int","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($a, $b) {\n  if ($a > $b) {\n    return rand($b, $a);\n  }\n  return rand($a, $b);\n}\n")+"("+o+", "+l+")",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.math_random_float=function(l){return["(float)rand()/(float)getrandmax()",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.math_atan2=function(l){var o=e.Blockly.PHP.valueToCode(l,"X",e.Blockly.PHP.ORDER_NONE)||"0";return["atan2("+(e.Blockly.PHP.valueToCode(l,"Y",e.Blockly.PHP.ORDER_NONE)||"0")+", "+o+") / pi() * 180",e.Blockly.PHP.ORDER_DIVISION]},e.Blockly.PHP.controls_repeat_ext=function(l){var o=l.getField("TIMES")?String(Number(l.getFieldValue("TIMES"))):e.Blockly.PHP.valueToCode(l,"TIMES",e.Blockly.PHP.ORDER_ASSIGNMENT)||"0",P=e.Blockly.PHP.statementToCode(l,"DO");P=e.Blockly.PHP.addLoopTrap(P,l),l="";var n=e.Blockly.PHP.nameDB_.getDistinctName("count",e.module$exports$Blockly$Names.NameType.VARIABLE),t=o;return o.match(/^\w+$/)||(0,e.module$exports$Blockly$utils$string.isNumber)(o)||(l+=(t=e.Blockly.PHP.nameDB_.getDistinctName("repeat_end",e.module$exports$Blockly$Names.NameType.VARIABLE))+" = "+o+";\n"),l+"for ("+n+" = 0; "+n+" < "+t+"; "+n+"++) {\n"+P+"}\n"},e.Blockly.PHP.controls_repeat=e.Blockly.PHP.controls_repeat_ext,e.Blockly.PHP.controls_whileUntil=function(l){var o="UNTIL"===l.getFieldValue("MODE"),P=e.Blockly.PHP.valueToCode(l,"BOOL",o?e.Blockly.PHP.ORDER_LOGICAL_NOT:e.Blockly.PHP.ORDER_NONE)||"false",n=e.Blockly.PHP.statementToCode(l,"DO");return o&&(P="!"+P),"while ("+P+") {\n"+(n=e.Blockly.PHP.addLoopTrap(n,l))+"}\n"},e.Blockly.PHP.controls_for=function(l){var o=e.Blockly.PHP.nameDB_.getName(l.getFieldValue("VAR"),e.module$exports$Blockly$Names.NameType.VARIABLE),P=e.Blockly.PHP.valueToCode(l,"FROM",e.Blockly.PHP.ORDER_ASSIGNMENT)||"0",n=e.Blockly.PHP.valueToCode(l,"TO",e.Blockly.PHP.ORDER_ASSIGNMENT)||"0",t=e.Blockly.PHP.valueToCode(l,"BY",e.Blockly.PHP.ORDER_ASSIGNMENT)||"1",r=e.Blockly.PHP.statementToCode(l,"DO");if(r=e.Blockly.PHP.addLoopTrap(r,l),(0,e.module$exports$Blockly$utils$string.isNumber)(P)&&(0,e.module$exports$Blockly$utils$string.isNumber)(n)&&(0,e.module$exports$Blockly$utils$string.isNumber)(t)){var c=Number(P)<=Number(n);l="for ("+o+" = "+P+"; "+o+(c?" <= ":" >= ")+n+"; "+o,l=(1===(o=Math.abs(Number(t)))?l+(c?"++":"--"):l+(c?" += ":" -= ")+o)+") {\n"+r+"}\n"}else l="",c=P,P.match(/^\w+$/)||(0,e.module$exports$Blockly$utils$string.isNumber)(P)||(l+=(c=e.Blockly.PHP.nameDB_.getDistinctName(o+"_start",e.module$exports$Blockly$Names.NameType.VARIABLE))+" = "+P+";\n"),P=n,n.match(/^\w+$/)||(0,e.module$exports$Blockly$utils$string.isNumber)(n)||(l+=(P=e.Blockly.PHP.nameDB_.getDistinctName(o+"_end",e.module$exports$Blockly$Names.NameType.VARIABLE))+" = "+n+";\n"),l+=(n=e.Blockly.PHP.nameDB_.getDistinctName(o+"_inc",e.module$exports$Blockly$Names.NameType.VARIABLE))+" = ",l=(l=(0,e.module$exports$Blockly$utils$string.isNumber)(t)?l+(Math.abs(t)+";\n"):l+"abs("+t+");\n")+"if ("+c+" > "+P+") {\n"+(e.Blockly.PHP.INDENT+n)+" = -"+n+";\n",l+="}\n",l+="for ("+o+" = "+c+"; "+n+" >= 0 ? "+o+" <= "+P+" : "+o+" >= "+P+"; "+o+" += "+n+") {\n"+r+"}\n";return l},e.Blockly.PHP.controls_forEach=function(l){var o=e.Blockly.PHP.nameDB_.getName(l.getFieldValue("VAR"),e.module$exports$Blockly$Names.NameType.VARIABLE),P=e.Blockly.PHP.valueToCode(l,"LIST",e.Blockly.PHP.ORDER_ASSIGNMENT)||"[]",n=e.Blockly.PHP.statementToCode(l,"DO");return"foreach ("+P+" as "+o+") {\n"+(n=e.Blockly.PHP.addLoopTrap(n,l))+"}\n"},e.Blockly.PHP.controls_flow_statements=function(l){var o="";if(e.Blockly.PHP.STATEMENT_PREFIX&&(o+=e.Blockly.PHP.injectId(e.Blockly.PHP.STATEMENT_PREFIX,l)),e.Blockly.PHP.STATEMENT_SUFFIX&&(o+=e.Blockly.PHP.injectId(e.Blockly.PHP.STATEMENT_SUFFIX,l)),e.Blockly.PHP.STATEMENT_PREFIX){var P=l.getSurroundLoop();P&&!P.suppressPrefixSuffix&&(o+=e.Blockly.PHP.injectId(e.Blockly.PHP.STATEMENT_PREFIX,P))}switch(l.getFieldValue("FLOW")){case"BREAK":return o+"break;\n";case"CONTINUE":return o+"continue;\n"}throw Error("Unknown flow statement.")},e.Blockly.PHP.controls_if=function(l){var o=0,P="";e.Blockly.PHP.STATEMENT_PREFIX&&(P+=e.Blockly.PHP.injectId(e.Blockly.PHP.STATEMENT_PREFIX,l));do{var n=e.Blockly.PHP.valueToCode(l,"IF"+o,e.Blockly.PHP.ORDER_NONE)||"false",t=e.Blockly.PHP.statementToCode(l,"DO"+o);e.Blockly.PHP.STATEMENT_SUFFIX&&(t=e.Blockly.PHP.prefixLines(e.Blockly.PHP.injectId(e.Blockly.PHP.STATEMENT_SUFFIX,l),e.Blockly.PHP.INDENT)+t),P+=(0<o?" else ":"")+"if ("+n+") {\n"+t+"}",o++}while(l.getInput("IF"+o));return(l.getInput("ELSE")||e.Blockly.PHP.STATEMENT_SUFFIX)&&(t=e.Blockly.PHP.statementToCode(l,"ELSE"),e.Blockly.PHP.STATEMENT_SUFFIX&&(t=e.Blockly.PHP.prefixLines(e.Blockly.PHP.injectId(e.Blockly.PHP.STATEMENT_SUFFIX,l),e.Blockly.PHP.INDENT)+t),P+=" else {\n"+t+"}"),P+"\n"},e.Blockly.PHP.controls_ifelse=e.Blockly.PHP.controls_if,e.Blockly.PHP.logic_compare=function(l){var o={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[l.getFieldValue("OP")],P="=="===o||"!="===o?e.Blockly.PHP.ORDER_EQUALITY:e.Blockly.PHP.ORDER_RELATIONAL;return[(e.Blockly.PHP.valueToCode(l,"A",P)||"0")+" "+o+" "+(l=e.Blockly.PHP.valueToCode(l,"B",P)||"0"),P]},e.Blockly.PHP.logic_operation=function(l){var o="AND"===l.getFieldValue("OP")?"&&":"||",P="&&"===o?e.Blockly.PHP.ORDER_LOGICAL_AND:e.Blockly.PHP.ORDER_LOGICAL_OR,n=e.Blockly.PHP.valueToCode(l,"A",P);if(l=e.Blockly.PHP.valueToCode(l,"B",P),n||l){var t="&&"===o?"true":"false";n||(n=t),l||(l=t)}else l=n="false";return[n+" "+o+" "+l,P]},e.Blockly.PHP.logic_negate=function(l){var o=e.Blockly.PHP.ORDER_LOGICAL_NOT;return["!"+(e.Blockly.PHP.valueToCode(l,"BOOL",o)||"true"),o]},e.Blockly.PHP.logic_boolean=function(l){return["TRUE"===l.getFieldValue("BOOL")?"true":"false",e.Blockly.PHP.ORDER_ATOMIC]},e.Blockly.PHP.logic_null=function(l){return["null",e.Blockly.PHP.ORDER_ATOMIC]},e.Blockly.PHP.logic_ternary=function(l){return[(e.Blockly.PHP.valueToCode(l,"IF",e.Blockly.PHP.ORDER_CONDITIONAL)||"false")+" ? "+(e.Blockly.PHP.valueToCode(l,"THEN",e.Blockly.PHP.ORDER_CONDITIONAL)||"null")+" : "+(l=e.Blockly.PHP.valueToCode(l,"ELSE",e.Blockly.PHP.ORDER_CONDITIONAL)||"null"),e.Blockly.PHP.ORDER_CONDITIONAL]},e.Blockly.PHP.lists_create_empty=function(l){return["array()",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.lists_create_with=function(l){for(var o=Array(l.itemCount_),P=0;P<l.itemCount_;P++)o[P]=e.Blockly.PHP.valueToCode(l,"ADD"+P,e.Blockly.PHP.ORDER_NONE)||"null";return[o="array("+o.join(", ")+")",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.lists_repeat=function(l){return[e.Blockly.PHP.provideFunction_("lists_repeat","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($value, $count) {\n  $array = array();\n  for ($index = 0; $index < $count; $index++) {\n    $array[] = $value;\n  }\n  return $array;\n}\n")+"("+(e.Blockly.PHP.valueToCode(l,"ITEM",e.Blockly.PHP.ORDER_NONE)||"null")+", "+(l=e.Blockly.PHP.valueToCode(l,"NUM",e.Blockly.PHP.ORDER_NONE)||"0")+")",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.lists_length=function(l){return[e.Blockly.PHP.provideFunction_("length","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($value) {\n  if (is_string($value)) {\n    return strlen($value);\n  } else {\n    return count($value);\n  }\n}\n")+"("+(l=e.Blockly.PHP.valueToCode(l,"VALUE",e.Blockly.PHP.ORDER_NONE)||"''")+")",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.lists_isEmpty=function(l){return["empty("+(e.Blockly.PHP.valueToCode(l,"VALUE",e.Blockly.PHP.ORDER_FUNCTION_CALL)||"array()")+")",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.lists_indexOf=function(l){var o=e.Blockly.PHP.valueToCode(l,"FIND",e.Blockly.PHP.ORDER_NONE)||"''",P=e.Blockly.PHP.valueToCode(l,"VALUE",e.Blockly.PHP.ORDER_MEMBER)||"[]",n=" -1",t="";return l.workspace.options.oneBasedIndex&&(n=" 0",t=" + 1"),[("FIRST"===l.getFieldValue("END")?e.Blockly.PHP.provideFunction_("indexOf","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($haystack, $needle) {\n  for ($index = 0; $index < count($haystack); $index++) {\n    if ($haystack[$index] == $needle) return $index"+t+";\n  }\n  return "+n+";\n}\n"):e.Blockly.PHP.provideFunction_("lastIndexOf","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($haystack, $needle) {\n  $last = "+n+";\n  for ($index = 0; $index < count($haystack); $index++) {\n    if ($haystack[$index] == $needle) $last = $index"+t+";\n  }\n  return $last;\n}\n"))+"("+P+", "+o+")",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.lists_getIndex=function(l){var o=l.getFieldValue("MODE")||"GET";switch(l.getFieldValue("WHERE")||"FROM_START"){case"FIRST":if("GET"===o)return[(e.Blockly.PHP.valueToCode(l,"VALUE",e.Blockly.PHP.ORDER_MEMBER)||"array()")+"[0]",e.Blockly.PHP.ORDER_MEMBER];if("GET_REMOVE"===o)return["array_shift("+(e.Blockly.PHP.valueToCode(l,"VALUE",e.Blockly.PHP.ORDER_NONE)||"array()")+")",e.Blockly.PHP.ORDER_FUNCTION_CALL];if("REMOVE"===o)return"array_shift("+(e.Blockly.PHP.valueToCode(l,"VALUE",e.Blockly.PHP.ORDER_NONE)||"array()")+");\n";break;case"LAST":if("GET"===o)return["end("+(e.Blockly.PHP.valueToCode(l,"VALUE",e.Blockly.PHP.ORDER_NONE)||"array()")+")",e.Blockly.PHP.ORDER_FUNCTION_CALL];if("GET_REMOVE"===o)return["array_pop("+(e.Blockly.PHP.valueToCode(l,"VALUE",e.Blockly.PHP.ORDER_NONE)||"array()")+")",e.Blockly.PHP.ORDER_FUNCTION_CALL];if("REMOVE"===o)return"array_pop("+(e.Blockly.PHP.valueToCode(l,"VALUE",e.Blockly.PHP.ORDER_NONE)||"array()")+");\n";break;case"FROM_START":var P=e.Blockly.PHP.getAdjusted(l,"AT");if("GET"===o)return[(e.Blockly.PHP.valueToCode(l,"VALUE",e.Blockly.PHP.ORDER_MEMBER)||"array()")+"["+P+"]",e.Blockly.PHP.ORDER_MEMBER];if("GET_REMOVE"===o)return["array_splice("+(e.Blockly.PHP.valueToCode(l,"VALUE",e.Blockly.PHP.ORDER_NONE)||"array()")+", "+P+", 1)[0]",e.Blockly.PHP.ORDER_FUNCTION_CALL];if("REMOVE"===o)return"array_splice("+(e.Blockly.PHP.valueToCode(l,"VALUE",e.Blockly.PHP.ORDER_NONE)||"array()")+", "+P+", 1);\n";break;case"FROM_END":if("GET"===o)return["array_slice("+(o=e.Blockly.PHP.valueToCode(l,"VALUE",e.Blockly.PHP.ORDER_NONE)||"array()")+", "+(l=e.Blockly.PHP.getAdjusted(l,"AT",1,!0))+", 1)[0]",e.Blockly.PHP.ORDER_FUNCTION_CALL];if("GET_REMOVE"===o||"REMOVE"===o){if(l="array_splice("+(P=e.Blockly.PHP.valueToCode(l,"VALUE",e.Blockly.PHP.ORDER_NONE)||"array()")+", count("+P+") - "+(l=e.Blockly.PHP.getAdjusted(l,"AT",1,!1,e.Blockly.PHP.ORDER_SUBTRACTION))+", 1)[0]","GET_REMOVE"===o)return[l,e.Blockly.PHP.ORDER_FUNCTION_CALL];if("REMOVE"===o)return l+";\n"}break;case"RANDOM":if(l=e.Blockly.PHP.valueToCode(l,"VALUE",e.Blockly.PHP.ORDER_NONE)||"array()","GET"===o)return[e.Blockly.PHP.provideFunction_("lists_get_random_item","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($list) {\n  return $list[rand(0,count($list)-1)];\n}\n")+"("+l+")",e.Blockly.PHP.ORDER_FUNCTION_CALL];if("GET_REMOVE"===o)return[e.Blockly.PHP.provideFunction_("lists_get_remove_random_item","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"(&$list) {\n  $x = rand(0,count($list)-1);\n  unset($list[$x]);\n  return array_values($list);\n}\n")+"("+l+")",e.Blockly.PHP.ORDER_FUNCTION_CALL];if("REMOVE"===o)return e.Blockly.PHP.provideFunction_("lists_remove_random_item","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"(&$list) {\n  unset($list[rand(0,count($list)-1)]);\n}\n")+"("+l+");\n"}throw Error("Unhandled combination (lists_getIndex).")},e.Blockly.PHP.lists_setIndex=function(l){var o=l.getFieldValue("MODE")||"GET",P=l.getFieldValue("WHERE")||"FROM_START",n=e.Blockly.PHP.valueToCode(l,"TO",e.Blockly.PHP.ORDER_ASSIGNMENT)||"null";switch(P){case"FIRST":if("SET"===o)return(e.Blockly.PHP.valueToCode(l,"LIST",e.Blockly.PHP.ORDER_MEMBER)||"array()")+"[0] = "+n+";\n";if("INSERT"===o)return"array_unshift("+(e.Blockly.PHP.valueToCode(l,"LIST",e.Blockly.PHP.ORDER_NONE)||"array()")+", "+n+");\n";break;case"LAST":if(l=e.Blockly.PHP.valueToCode(l,"LIST",e.Blockly.PHP.ORDER_NONE)||"array()","SET"===o)return e.Blockly.PHP.provideFunction_("lists_set_last_item","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"(&$list, $value) {\n  $list[count($list) - 1] = $value;\n}\n")+"("+l+", "+n+");\n";if("INSERT"===o)return"array_push("+l+", "+n+");\n";break;case"FROM_START":if(P=e.Blockly.PHP.getAdjusted(l,"AT"),"SET"===o)return(e.Blockly.PHP.valueToCode(l,"LIST",e.Blockly.PHP.ORDER_MEMBER)||"array()")+"["+P+"] = "+n+";\n";if("INSERT"===o)return"array_splice("+(e.Blockly.PHP.valueToCode(l,"LIST",e.Blockly.PHP.ORDER_NONE)||"array()")+", "+P+", 0, "+n+");\n";break;case"FROM_END":if(P=e.Blockly.PHP.valueToCode(l,"LIST",e.Blockly.PHP.ORDER_NONE)||"array()",l=e.Blockly.PHP.getAdjusted(l,"AT",1),"SET"===o)return e.Blockly.PHP.provideFunction_("lists_set_from_end","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"(&$list, $at, $value) {\n  $list[count($list) - $at] = $value;\n}\n")+"("+P+", "+l+", "+n+");\n";if("INSERT"===o)return e.Blockly.PHP.provideFunction_("lists_insert_from_end","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"(&$list, $at, $value) {\n  return array_splice($list, count($list) - $at, 0, $value);\n}\n")+"("+P+", "+l+", "+n+");\n";break;case"RANDOM":if((l=e.Blockly.PHP.valueToCode(l,"LIST",e.Blockly.PHP.ORDER_REFERENCE)||"array()").match(/^\$\w+$/))P="";else{var t=(P=e.Blockly.PHP.nameDB_.getDistinctName("tmp_list",e.module$exports$Blockly$Names.NameType.VARIABLE))+" = &"+l+";\n";l=P,P=t}if(P+=(t=e.Blockly.PHP.nameDB_.getDistinctName("tmp_x",e.module$exports$Blockly$Names.NameType.VARIABLE))+" = rand(0, count("+l+")-1);\n","SET"===o)return P+(l+"[")+t+"] = "+n+";\n";if("INSERT"===o)return P+"array_splice("+l+", "+t+", 0, "+n+");\n"}throw Error("Unhandled combination (lists_setIndex).")},e.Blockly.PHP.lists_getSublist=function(l){var o=e.Blockly.PHP.valueToCode(l,"LIST",e.Blockly.PHP.ORDER_NONE)||"array()",P=l.getFieldValue("WHERE1"),n=l.getFieldValue("WHERE2");if("FIRST"!==P||"LAST"!==n)if(o.match(/^\$\w+$/)||"FROM_END"!==P&&"FROM_START"===n){switch(P){case"FROM_START":P=e.Blockly.PHP.getAdjusted(l,"AT1");break;case"FROM_END":P="count("+o+") - "+(P=e.Blockly.PHP.getAdjusted(l,"AT1",1,!1,e.Blockly.PHP.ORDER_SUBTRACTION));break;case"FIRST":P="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(n){case"FROM_START":n=e.Blockly.PHP.getAdjusted(l,"AT2",0,!1,e.Blockly.PHP.ORDER_SUBTRACTION),n+=" - ",n=(0,e.module$exports$Blockly$utils$string.isNumber)(String(P))||String(P).match(/^\(.+\)$/)?n+P:n+"("+P+")",n+=" + 1";break;case"FROM_END":n="count("+o+") - "+(n=e.Blockly.PHP.getAdjusted(l,"AT2",0,!1,e.Blockly.PHP.ORDER_SUBTRACTION))+" - ",n=(0,e.module$exports$Blockly$utils$string.isNumber)(String(P))||String(P).match(/^\(.+\)$/)?n+P:n+"("+P+")";break;case"LAST":n="count("+o+") - ",n=(0,e.module$exports$Blockly$utils$string.isNumber)(String(P))||String(P).match(/^\(.+\)$/)?n+P:n+"("+P+")";break;default:throw Error("Unhandled option (lists_getSublist).")}o="array_slice("+o+", "+P+", "+n+")"}else{var t=e.Blockly.PHP.getAdjusted(l,"AT1");l=e.Blockly.PHP.getAdjusted(l,"AT2"),o=e.Blockly.PHP.provideFunction_("lists_get_sublist","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($list, $where1, $at1, $where2, $at2) {\n  if ($where1 == 'FROM_END') {\n    $at1 = count($list) - 1 - $at1;\n  } else if ($where1 == 'FIRST') {\n    $at1 = 0;\n  } else if ($where1 != 'FROM_START') {\n    throw new Exception('Unhandled option (lists_get_sublist).');\n  }\n  $length = 0;\n  if ($where2 == 'FROM_START') {\n    $length = $at2 - $at1 + 1;\n  } else if ($where2 == 'FROM_END') {\n    $length = count($list) - $at1 - $at2;\n  } else if ($where2 == 'LAST') {\n    $length = count($list) - $at1;\n  } else {\n    throw new Exception('Unhandled option (lists_get_sublist).');\n  }\n  return array_slice($list, $at1, $length);\n}\n")+"("+o+", '"+P+"', "+t+", '"+n+"', "+l+")"}return[o,e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.lists_sort=function(l){var o=e.Blockly.PHP.valueToCode(l,"LIST",e.Blockly.PHP.ORDER_NONE)||"array()",P="1"===l.getFieldValue("DIRECTION")?1:-1;return l=l.getFieldValue("TYPE"),[e.Blockly.PHP.provideFunction_("lists_sort","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($list, $type, $direction) {\n  $sortCmpFuncs = array(\n    'NUMERIC' => 'strnatcasecmp',\n    'TEXT' => 'strcmp',\n    'IGNORE_CASE' => 'strcasecmp'\n  );\n  $sortCmp = $sortCmpFuncs[$type];\n  $list2 = $list;\n  usort($list2, $sortCmp);\n  if ($direction == -1) {\n    $list2 = array_reverse($list2);\n  }\n  return $list2;\n}\n")+"("+o+', "'+l+'", '+P+")",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.lists_split=function(l){var o=e.Blockly.PHP.valueToCode(l,"INPUT",e.Blockly.PHP.ORDER_NONE),P=e.Blockly.PHP.valueToCode(l,"DELIM",e.Blockly.PHP.ORDER_NONE)||"''";if("SPLIT"===(l=l.getFieldValue("MODE")))o||(o="''"),l="explode";else{if("JOIN"!==l)throw Error("Unknown mode: "+l);o||(o="array()"),l="implode"}return[l+"("+P+", "+o+")",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.lists_reverse=function(l){return["array_reverse("+(e.Blockly.PHP.valueToCode(l,"LIST",e.Blockly.PHP.ORDER_NONE)||"[]")+")",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.colour_picker=function(l){return[e.Blockly.PHP.quote_(l.getFieldValue("COLOUR")),e.Blockly.PHP.ORDER_ATOMIC]},e.Blockly.PHP.colour_random=function(l){return[e.Blockly.PHP.provideFunction_("colour_random","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"() {\n  return '#' . str_pad(dechex(mt_rand(0, 0xFFFFFF)), 6, '0', STR_PAD_LEFT);\n}\n")+"()",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.colour_rgb=function(l){var o=e.Blockly.PHP.valueToCode(l,"RED",e.Blockly.PHP.ORDER_NONE)||0,P=e.Blockly.PHP.valueToCode(l,"GREEN",e.Blockly.PHP.ORDER_NONE)||0;return l=e.Blockly.PHP.valueToCode(l,"BLUE",e.Blockly.PHP.ORDER_NONE)||0,[e.Blockly.PHP.provideFunction_("colour_rgb","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($r, $g, $b) {\n  $r = round(max(min($r, 100), 0) * 2.55);\n  $g = round(max(min($g, 100), 0) * 2.55);\n  $b = round(max(min($b, 100), 0) * 2.55);\n  $hex = '#';\n  $hex .= str_pad(dechex($r), 2, '0', STR_PAD_LEFT);\n  $hex .= str_pad(dechex($g), 2, '0', STR_PAD_LEFT);\n  $hex .= str_pad(dechex($b), 2, '0', STR_PAD_LEFT);\n  return $hex;\n}\n")+"("+o+", "+P+", "+l+")",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.colour_blend=function(l){var o=e.Blockly.PHP.valueToCode(l,"COLOUR1",e.Blockly.PHP.ORDER_NONE)||"'#000000'",P=e.Blockly.PHP.valueToCode(l,"COLOUR2",e.Blockly.PHP.ORDER_NONE)||"'#000000'";return l=e.Blockly.PHP.valueToCode(l,"RATIO",e.Blockly.PHP.ORDER_NONE)||.5,[e.Blockly.PHP.provideFunction_("colour_blend","\nfunction "+e.Blockly.PHP.FUNCTION_NAME_PLACEHOLDER_+"($c1, $c2, $ratio) {\n  $ratio = max(min($ratio, 1), 0);\n  $r1 = hexdec(substr($c1, 1, 2));\n  $g1 = hexdec(substr($c1, 3, 2));\n  $b1 = hexdec(substr($c1, 5, 2));\n  $r2 = hexdec(substr($c2, 1, 2));\n  $g2 = hexdec(substr($c2, 3, 2));\n  $b2 = hexdec(substr($c2, 5, 2));\n  $r = round($r1 * (1 - $ratio) + $r2 * $ratio);\n  $g = round($g1 * (1 - $ratio) + $g2 * $ratio);\n  $b = round($b1 * (1 - $ratio) + $b2 * $ratio);\n  $hex = '#';\n  $hex .= str_pad(dechex($r), 2, '0', STR_PAD_LEFT);\n  $hex .= str_pad(dechex($g), 2, '0', STR_PAD_LEFT);\n  $hex .= str_pad(dechex($b), 2, '0', STR_PAD_LEFT);\n  return $hex;\n}\n")+"("+o+", "+P+", "+l+")",e.Blockly.PHP.ORDER_FUNCTION_CALL]},e.Blockly.PHP.__namespace__=e,e.Blockly.PHP}));