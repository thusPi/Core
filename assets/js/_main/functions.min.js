function round(n,t=2){let e=Math.pow(10,t);return Math.round(n*e)/e}function showPopup(n){n.hasClass("popup")||(n=n.parents(".popup")),n.addClass("show"),$(".popup-shield").addClass("show")}function isSet(n){return null!=n}function trim(n,t=" "){let e=0,i=n.length;for(;e<i&&t.indexOf(n[e])>=0;)++e;for(;i>e&&t.indexOf(n[i-1])>=0;)--i;return e>0||i<n.length?n.substring(e,i):n}function closestArrayItem(n,t){return t.reduce((function(t,e){return Math.abs(e-n)<Math.abs(t-n)?e:t}))}function naturalJoin(n,t=", ",e="and"){let i=!1;if(n.length>1){let o=n[n.length-1];n.splice(n.length-1,1),i=n.join(t)+e+o}else i=n[0];return i}function hidePopup(n){n.hasClass("popup")||(n=n.parents(".popup")),n.removeClass("show"),0==$(".popup.show").length&&$(".popup-shield").removeClass("show")}function numRange(n,t,e=1){n=parseFloat(n),t=parseFloat(t),e=parseFloat(e);let i=[];for(let o=n;o<=t;o+=e)i.push(o);return i}function throttle(n,t){let e;return function(i){e||(e=setTimeout((function(){n(i),e=void 0}),t))}}function debounce(n,t){let e;return function(...i){clearTimeout(e),e=setTimeout((function(){n(...i)}),t)}}function arrayColumn(n,t,e){if(void 0===e)return n.map((function(n,e){return n[t]}));{let i=[];return n.forEach((function(n,o){if(void 0===n||void 0===n[t])return!0;i[n[t]]=n[e]})),i}}function sendMessage(n,t=[],e=!1,i=4e3){message=translate(n,t);let o="message-"+Date.now(),s=$(`<div id="${o}" class="message animate-in"><div class="message-inner">${message}</div></div>`);s.appendTo(".message-area"),1==e&&s.addClass("is-error"),userPrefersReducedMotion()?setTimeout((function(){s.remove()}),i):setTimeout((function(){s.removeClass("animate-in"),setTimeout((function(){s.addClass("animate-out"),setTimeout((function(){s.remove()}),600)}),i)}),10)}function urlParam(n){let t=String(window.location).split("?");return queryStr="?"+t[t.length-1],new URLSearchParams(queryStr).get(n)}function saveState(n,t,e=null){return new Promise((function(i,o){thusPi.api.call("user-set-setting",{key:n,value:t,uuid:e}).then((function(){i()})).catch((function(){o()}))}))}function isArray(n){return!!n&&n.constructor===Array}function isObject(n){return!!n&&n.constructor===Object}$.fn.hasAttr=function(n){return void 0!==this.attr(n)},$.fn.showLoading=function(n=0){0==this.find("> .loading-icon").length&&(this.append('<div class="loading-icon pl-1"><i class="far fa-circle-notch fa-spin loading-icon-inner text-category"></i></div>'),n>0&&setTimeout((function(){this.hideLoading()}),n))},$.fn.hideLoading=function(){this.find("> .loading-icon").length>=0&&this.find("> .loading-icon").remove()},$(document).ready((function(){$(".popup-shield").click((function(){hidePopup($(".popup.show, .popup-dialog.show").last())})),$(document).on("keydown",(function(n){"Escape"==n.key&&$(".popup-shield").trigger("click")})),$(".popup-close").click((function(){$(".popup-shield").trigger("click")}))})),String.prototype.replaceAll=function(n,t){return void 0===t?this.toString():this.split(n).join(t)};