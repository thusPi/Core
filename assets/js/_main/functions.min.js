function getCSSVariable(n){if(0!==(n=trim(trim(n,"var("),")")).indexOf("--"))return n;const t=trim(getComputedStyle(document.body).getPropertyValue(n));return 0===t.indexOf("rgb")||0===t.indexOf("hsl")||0===t.indexOf("hsv")||0===t.indexOf("#")?$("<div></div>").css("background-color",t).css("background-color"):t}function rgbaToArray(n){return n.replace(/[^\d,]/g,"").split(",")}function arrayToRgba(n){return 3==n.length?"rgb("+n.join(",")+")":4==n.length?"rgba("+n.join(",")+")":void 0}function round(n,t=2){let e=Math.pow(10,t);return Math.round(n*e)/e}function showPopup(n){n.hasClass("popup")||(n=n.parents(".popup")),n.addClass("show"),$(".popup-shield").addClass("show")}function isSet(n){return null!=n}function trim(n,t=" "){let e=0,o=n.length;for(;e<o&&t.indexOf(n[e])>=0;)++e;for(;o>e&&t.indexOf(n[o-1])>=0;)--o;return e>0||o<n.length?n.substring(e,o):n}function closestArrayItem(n,t){return t.reduce((function(t,e){return Math.abs(e-n)<Math.abs(t-n)?e:t}))}function naturalJoin(n,t=", ",e="and"){let o=!1;if(n.length>1){let i=n[n.length-1];n.splice(n.length-1,1),o=n.join(t)+e+i}else o=n[0];return o}function hidePopup(n){n.hasClass("popup")||(n=n.parents(".popup")),n.removeClass("show"),0==$(".popup.show").length&&$(".popup-shield").removeClass("show")}function numRange(n,t,e=1){n=parseFloat(n),t=parseFloat(t),e=parseFloat(e);let o=[];for(let i=n;i<=t;i+=e)o.push(i);return o}function throttle(n,t){let e;return function(o){e||(e=setTimeout((function(){n(o),e=void 0}),t))}}function debounce(n,t){let e;return function(...o){clearTimeout(e),e=setTimeout((function(){n(...o)}),t)}}function arrayColumn(n,t,e){if(void 0===e)return n.map((function(n,e){return n[t]}));{let o=[];return n.forEach((function(n,i){if(void 0===n||void 0===n[t])return!0;o[n[t]]=n[e]})),o}}function padLeft(n,t=2){for(n=n.toString();n.length<t;)n="0"+n;return n}function sendMessage(n,t=[],e=!1,o=4e3){message=translate(n,t);let i="message-"+Date.now(),r=$(`<div id="${i}" class="message animate-in"><div class="message-inner">${message}</div></div>`);r.appendTo(".message-area"),1==e&&r.addClass("is-error"),userPrefersReducedMotion()?setTimeout((function(){r.remove()}),o):setTimeout((function(){r.removeClass("animate-in"),setTimeout((function(){r.addClass("animate-out"),setTimeout((function(){r.remove()}),600)}),o)}),10)}function urlParam(n){let t=String(window.location).split("?");return queryStr="?"+t[t.length-1],new URLSearchParams(queryStr).get(n)}function saveState(n,t,e=null){return new Promise((function(o,i){thusPi.api.call("user-set-setting",{key:n,value:t,uuid:e}).then((function(){o()})).catch((function(){i()}))}))}function isArray(n){return!!n&&n.constructor===Array}function isObject(n){return!!n&&n.constructor===Object}$.fn.hasAttr=function(n){return void 0!==this.attr(n)},$.fn.showLoading=function(n=0){this.find("> .loading-icon").length>0||(this.append('<span class="loading-icon pl-1"><i class="far fa-circle-notch fa-spin text-category icon d-inline-block icon-scale-xxs"></i></span>'),n>0&&setTimeout((function(){this.hideLoading()}),n))},$.fn.hideLoading=function(){this.find("> .loading-icon").length>=0&&this.find("> .loading-icon").remove()},$(document).ready((function(){$(".popup-shield").click((function(){hidePopup($(".popup.show, .popup-dialog.show").last())})),$(document).on("keydown",(function(n){"Escape"==n.key&&$(".popup-shield").trigger("click")})),$(".popup-close").click((function(){$(".popup-shield").trigger("click")}))})),String.prototype.replaceAll=function(n,t){return void 0===t?this.toString():this.split(n).join(t)};