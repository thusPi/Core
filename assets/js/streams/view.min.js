function addStreamSubCategory(t){let a=$(`.stream-category[data-category="${t}"]`),e=a.find('.stream-sub-category[data-sub-category="and"]').first();if(e.length<=0)return!1;"false"==e.attr("data-show")?e.attr("data-show",!0):(e=e.clone(),e.attr({"data-set":!1,"data-show":!0}),e.find(".stream-card-content").find('.input[data-type="search"]').clearValue(),e.find(".stream-card-content").find('input:not([data-type="search"])').val(""),e.find(".stream-card-content").find('.input:not(input):not([data-type="search"])').text(""),e.insertBefore(a.find(".category-actions-wrapper")),e.find(".input.stream-card-search").setSearchValue("no_stream_card_selected",""))}function printStreamCategories(t){let a=`${c.webroot}/api/get/stream-properties.php?stream_id=${t}`;$.get(a,(function(t){try{let a=(t=JSON.parse(t)).message;printStreamCategory(a.trigger,"trigger"),printStreamCategory(a.condition,"condition"),printStreamCategory(a.do,"do"),printStreamCategory(a.else,"else")}catch(t){}}))}function printStreamCategory(t,a){t.forEach((function(t,e){printStreamSubCategory(a,0==e?"main":"and",t)}))}function printStreamSubCategory(t,a,e){let r=$(`.stream-category[data-category="${t}"]`);"and"==a&&addStreamSubCategory(t);let n=r.find(`.stream-sub-category[data-sub-category="${a}"]`).last();n.find(".input.stream-card-search").setSearchValue(e.name);let s=n.find(".stream-card.show");s.find(".stream-card-content .search-wrapper .input").each((function(){let t=$(this),a=t.attr("data-param");t.setSearchValue(e[a])})),s.find('.stream-card-content .input:not([data-type="search"])').each((function(){let t=$(this),a=t.attr("data-param");"INPUT"==t.get(0).nodeName?t.val(e[a]):t.text(e[a])}))}$(document).on("HomioPi.search_value_change",".stream-sub-category .input.stream-card-search",(function(){let t=$(this),a=t.parents(".stream-sub-category"),e=t.getValue(),r=a.find(".stream-cards"),n=r.find(`.stream-card[data-stream-card="${e}"]`);r.find(".stream-card").removeClass("show"),n.length>0?n.addClass("show"):r.find("#stream-card-empty").addClass("show"),a.attr("data-set",!0)}));